require(readxl)
cel12 = read_xlsx('/home/mpozada/Dropbox/Marissela/IMARPE/Doc Varios/Solicitudes DATOS/Depredadores Superiores/Bitacora celdas 120 kHz Olaya 1202-04.xlsx')
cel14 = read.csv('/home/mpozada/Dropbox/Marissela/IMARPE/Doc Varios/Solicitudes DATOS/Depredadores Superiores/Bitacora Celdas 120 kHz Olaya 1402-04.csv')
cel17 = read_xlsx('/home/mpozada/Dropbox/IMARPE/DATA (copy)/pelagicos/1703-04/Bitacora Celdas 120 kHz Olaya + Flores_1703-04.xlsx')
cel18 = read_xlsx('/home/mpozada/Dropbox/IMARPE/DATA (copy)/pelagicos/1802-04/Bitacora Celdas 120 kHz Total 1802-04 ok.xlsx')
# Corrigiendo formato de algunas bitacoras --------------------------------
## eliminando data adicional
indna = which(is.na(cel12$Transecto))
cel12 = cel12[-indna,]
## corrigiendo headers
names(cel12)[131:132] = c('Nunclassified', 'Punclassified')
ind0 = grepl(pattern = '0', names(cel14))
names(cel14)[ind0] = c(gsub(pattern = 'X0', replacement = 'NA', names(cel14)[ind0][1:2]),
gsub('0', 'na', names(cel14)[ind0][3]))
names(cel14)[80] = 'Nancp'
names(cel14)[83] = 'Nancg'
ind0 = grepl(pattern = '0', names(cel17))
names(cel17)[ind0] = c(gsub(pattern = '0', replacement = 'NA', names(cel17)[ind0][1:2]),
gsub('0', 'na', names(cel17)[ind0][3]),
gsub('0', 'Na', names(cel17)[ind0][4:5]))
vars = c('Barco', 'Interval', 'Transecto', 'Lat_S', 'Lat_E', 'Lat_M',
'Lon_S', 'Lon_E', 'Lon_M', 'Date_S', 'Date_E', 'Date_M',
'Time_S', 'Time_E', 'Time_M', 'ANCP', 'Nancp', 'Pancp',
'ANCG', 'Nancg', 'Pancg', 'SAR', 'Nsar', 'Psar', 'JUR', 'Njur', 'Pjur',
'CAB', 'Ncab', 'Pcab', 'MUN', 'Nmun', 'Pmun', 'SAM', 'Nsam', 'Psam',
'BAG', 'Nbag', 'Pbag', 'FVO', 'Nfvo', 'Pfvo', 'POT', 'Npot', 'Ppot',
'VIN', 'Nvin', 'Pvin', 'MIC', 'Nmic', 'Pmic', 'ZOO', 'Nzoo', 'Pzoo',
'DEM', 'Ndem', 'Pdem', 'MER', 'Nmer', 'Pmer', 'OTR', 'Notr', 'Potr',
'CAM', 'Ncam', 'Pcam', 'Unclassified', 'Nunclassified', 'Punclassified' )
## uniformizando las variables
vars[which(vars %in% names(cel12) == FALSE)]
cel12$Barco = 'BIC Olaya'
vars[which(vars %in% names(cel14) == FALSE)]
cel14$Barco = 'BIC Olaya'
names(cel14)[2] = 'Transecto'
vars[which(vars %in% names(cel17) == FALSE)]
names(cel17)[2] = 'Transecto'
vars[which(vars %in% names(cel18) == FALSE)]
names(cel18)[3] = 'Transecto'
## agregando variable crucero
cel12$Survey = '1202-04'
cel14$Survey = '1402-04'
cel17$Survey = '1703-04'
cel18$Survey = '1803-04'
# Analizando las variables ------------------------------------------------
cel = c(cel12, cel14, cel17, cel18)
cel
View(cel)
